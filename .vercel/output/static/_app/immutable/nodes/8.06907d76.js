import{s as D,z as F,f as _,a as L,l as H,g,C as M,c as R,h as $,d as f,m as I,j as r,F as S,i as x,x as w,M as O}from"../chunks/scheduler.70959352.js";import{S as T,i as B,b as G,d as z,m as N,a as V,t as J,e as K}from"../chunks/index.06bdbd9c.js";import{A as Q}from"../chunks/AuthCheck.0a0c7e55.js";import{a as W,u as X,r as Y,m as Z,n as ee,o as te,e as se,b as ae,d as le}from"../chunks/firebase.0ebf22c9.js";function j(c){let t,n="Uploading...",s,a;return{c(){t=_("p"),t.textContent=n,s=L(),a=_("progress"),this.h()},l(e){t=g(e,"P",{"data-svelte-h":!0}),M(t)!=="svelte-be0b5h"&&(t.textContent=n),s=R(e),a=g(e,"PROGRESS",{class:!0}),$(a).forEach(f),this.h()},h(){r(a,"class","progress progress-info w-56 mt-6")},m(e,o){x(e,t,o),x(e,s,o),x(e,a,o)},d(e){e&&(f(t),f(s),f(a))}}}function re(c){let t,n="Upload a Profile Photo",s,a,e,o,b,U,u,v='<span class="label-text">Pick a file</span>',C,h,y,P,d,k,E,q,i=c[2]&&j();return{c(){t=_("h2"),t.textContent=n,s=L(),a=_("form"),e=_("div"),o=_("img"),U=L(),u=_("label"),u.innerHTML=v,C=L(),h=_("input"),y=L(),i&&i.c(),P=L(),d=_("a"),k=H("Finish"),this.h()},l(l){t=g(l,"H2",{class:!0,"data-svelte-h":!0}),M(t)!=="svelte-1whglfv"&&(t.textContent=n),s=R(l),a=g(l,"FORM",{class:!0});var p=$(a);e=g(p,"DIV",{class:!0});var m=$(e);o=g(m,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),U=R(m),u=g(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),M(u)!=="svelte-qouqa7"&&(u.innerHTML=v),C=R(m),h=g(m,"INPUT",{name:!0,type:!0,class:!0,accept:!0}),y=R(m),i&&i.l(m),m.forEach(f),p.forEach(f),P=R(l),d=g(l,"A",{href:!0,class:!0});var A=$(d);k=I(A,"Finish"),A.forEach(f),this.h()},h(){var l;r(t,"class","card-title"),S(o.src,b=c[1]??((l=c[0])==null?void 0:l.photoURL)??"/user.png")||r(o,"src",b),r(o,"alt","photoURL"),r(o,"width","256"),r(o,"height","256"),r(o,"class","mx-auto"),r(u,"for","photoURL"),r(u,"class","label"),r(h,"name","photoURL"),r(h,"type","file"),r(h,"class","file-input file-input-bordered w-full max-w-xs"),r(h,"accept","image/png, image/jpeg, image/gif, image/webp"),r(e,"class","form-control w-full max-w-xs my-10 mx-auto text-center"),r(a,"class","max-w-screen-md w-full"),r(d,"href",c[3]),r(d,"class","btn btn-primary")},m(l,p){x(l,t,p),x(l,s,p),x(l,a,p),w(a,e),w(e,o),w(e,U),w(e,u),w(e,C),w(e,h),w(e,y),i&&i.m(e,null),x(l,P,p),x(l,d,p),w(d,k),E||(q=O(h,"change",c[4]),E=!0)},p(l,p){var m;p&3&&!S(o.src,b=l[1]??((m=l[0])==null?void 0:m.photoURL)??"/user.png")&&r(o,"src",b),l[2]?i||(i=j(),i.c(),i.m(e,null)):i&&(i.d(1),i=null),p&8&&r(d,"href",l[3])},d(l){l&&(f(t),f(s),f(a),f(P),f(d)),i&&i.d(),E=!1,q()}}}function oe(c){let t,n;return t=new Q({props:{$$slots:{default:[re]},$$scope:{ctx:c}}}),{c(){G(t.$$.fragment)},l(s){z(t.$$.fragment,s)},m(s,a){N(t,s,a),n=!0},p(s,[a]){const e={};a&79&&(e.$$scope={dirty:a,ctx:s}),t.$set(e)},i(s){n||(V(t.$$.fragment,s),n=!0)},o(s){J(t.$$.fragment,s),n=!1},d(s){K(t,s)}}}function ne(c,t,n){let s,a,e;F(c,W,u=>n(5,a=u)),F(c,X,u=>n(0,e=u));let o,b=!1;async function U(u){n(2,b=!0);const v=u.target.files[0];n(1,o=URL.createObjectURL(v));const C=Y(Z,`users/${a.uid}/profile.png`),h=await ee(C,v),y=await te(h.ref);await se(ae(le,"users",a.uid),{photoURL:y}),n(2,b=!1)}return c.$$.update=()=>{c.$$.dirty&1&&n(3,s=`/${e==null?void 0:e.username}/edit`)},[e,o,b,s,U]}class pe extends T{constructor(t){super(),B(this,t,ne,oe,D,{})}}export{pe as component};
