import{s as W,f as h,l as F,a as P,g as _,h as A,m as N,d as E,c as B,C as Y,j as c,i as Z,x as r,I as $,n as G,y as K,z as tt}from"../chunks/scheduler.70959352.js";import{S as et,i as at}from"../chunks/index.06bdbd9c.js";import{p as rt}from"../chunks/parse.bee59afc.js";import{j as ot,k as st}from"../chunks/singletons.a71ac4a1.js";import{p as nt}from"../chunks/stores.1bcbde0c.js";const lt=ot("invalidate_all");function it(t){return st.apply_action(t)}function ct(t){const e=JSON.parse(t);return e.data&&(e.data=rt(e.data)),e}function Q(t){return HTMLElement.prototype.cloneNode.call(t)}function ut(t,e=()=>{}){const u=async({action:a,result:o,reset:m})=>{o.type==="success"&&(m!==!1&&HTMLFormElement.prototype.reset.call(t),await lt()),(location.origin+location.pathname===a.origin+a.pathname||o.type==="redirect"||o.type==="error")&&it(o)};async function v(a){var f,w,C,p;if(((f=a.submitter)!=null&&f.hasAttribute("formmethod")?a.submitter.formMethod:Q(t).method)!=="post")return;a.preventDefault();const m=new URL((w=a.submitter)!=null&&w.hasAttribute("formaction")?a.submitter.formAction:Q(t).action),d=new FormData(t),y=(C=a.submitter)==null?void 0:C.getAttribute("name");y&&d.append(y,((p=a.submitter)==null?void 0:p.getAttribute("value"))??"");const g=new AbortController;let T=!1;const l=await e({action:m,cancel:()=>T=!0,controller:g,get data(){return d},formData:d,get form(){return t},formElement:t,submitter:a.submitter})??u;if(T)return;let n;try{const s=await fetch(m,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:d,signal:g.signal});n=ct(await s.text()),n.type==="error"&&(n.status=s.status)}catch(s){if((s==null?void 0:s.name)==="AbortError")return;n={type:"error",error:s}}l({action:m,get data(){return d},formData:d,get form(){return t},formElement:t,update:s=>u({action:m,result:n,reset:s==null?void 0:s.reset}),result:n})}return HTMLFormElement.prototype.addEventListener.call(t,"submit",v),{destroy(){HTMLFormElement.prototype.removeEventListener.call(t,"submit",v)}}}function mt(t){var q;let e,u,v,a,o=t[0].bio+"",m,d,y,g=(((q=t[1].form)==null?void 0:q.problem)??"")+"",T,H,l,n,f,w='<span class="label-text">Your bio</span>',C,p,s,O,L,R="Update Bio",j,x,z,S,I,U;return{c(){e=h("main"),u=h("p"),v=F("Current Bio: "),a=h("span"),m=F(o),d=P(),y=h("p"),T=F(g),H=P(),l=h("form"),n=h("div"),f=h("label"),f.innerHTML=w,C=P(),p=h("textarea"),O=P(),L=h("button"),L.textContent=R,j=P(),x=h("a"),z=F("Back to Profile"),this.h()},l(b){e=_(b,"MAIN",{class:!0});var i=A(e);u=_(i,"P",{});var M=A(u);v=N(M,"Current Bio: "),a=_(M,"SPAN",{class:!0});var J=A(a);m=N(J,o),J.forEach(E),M.forEach(E),d=B(i),y=_(i,"P",{class:!0});var V=A(y);T=N(V,g),V.forEach(E),H=B(i),l=_(i,"FORM",{method:!0});var k=A(l);n=_(k,"DIV",{class:!0});var D=A(n);f=_(D,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Y(f)!=="svelte-a9zlk7"&&(f.innerHTML=w),C=B(D),p=_(D,"TEXTAREA",{name:!0,class:!0}),A(p).forEach(E),D.forEach(E),O=B(k),L=_(k,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(L)!=="svelte-tqnit3"&&(L.textContent=R),j=B(k),x=_(k,"A",{href:!0,class:!0});var X=A(x);z=N(X,"Back to Profile"),X.forEach(E),k.forEach(E),i.forEach(E),this.h()},h(){c(a,"class","text-info"),c(y,"class","text-error"),c(f,"for","bio"),c(f,"class","label"),c(p,"name","bio"),c(p,"class","textarea textarea-bordered textarea-accent"),p.value=s=t[0].bio,c(n,"class","form-control"),c(L,"class","btn btn-primary my-5"),c(x,"href",S=`/${t[0].username}/edit`),c(x,"class","btn btn-secondary"),c(l,"method","POST"),c(e,"class","max-w-lg prose text-center mx-auto my-6")},m(b,i){Z(b,e,i),r(e,u),r(u,v),r(u,a),r(a,m),r(e,d),r(e,y),r(y,T),r(e,H),r(e,l),r(l,n),r(n,f),r(n,C),r(n,p),r(l,O),r(l,L),r(l,j),r(l,x),r(x,z),I||(U=$(ut.call(null,l)),I=!0)},p(b,[i]){var M;i&1&&o!==(o=b[0].bio+"")&&G(m,o),i&2&&g!==(g=(((M=b[1].form)==null?void 0:M.problem)??"")+"")&&G(T,g),i&1&&s!==(s=b[0].bio)&&(p.value=s),i&1&&S!==(S=`/${b[0].username}/edit`)&&c(x,"href",S)},i:K,o:K,d(b){b&&E(e),I=!1,U()}}}function ft(t,e,u){let v;tt(t,nt,o=>u(1,v=o));let{data:a}=e;return t.$$set=o=>{"data"in o&&u(0,a=o.data)},[a,v]}class vt extends et{constructor(e){super(),at(this,e,ft,mt,W,{data:0})}}export{vt as component};
